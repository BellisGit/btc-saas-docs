# 系统角色清单

## 📋 概述

本文档列出了MES系统中设计的所有角色，按租户和功能模块进行分类整理。

---

## 🏢 英国总公司角色体系 (TENANT_UK_HEAD)

### 1. 战略决策层
| 角色ID | 角色代码 | 角色名称 | 角色类型 | 层级 | 数据权限 | 继承权限 | 父角色 |
|--------|----------|----------|----------|------|----------|----------|--------|
| ROLE_UK_EXECUTIVE | UK_EXECUTIVE | 英国执行层 | SYSTEM | 1 | ALL | FALSE | - |
| ROLE_UK_DIRECTOR | UK_DIRECTOR | 英国总监层 | SYSTEM | 2 | ALL | TRUE | ROLE_UK_EXECUTIVE |

### 2. 运营管理层
| 角色ID | 角色代码 | 角色名称 | 角色类型 | 层级 | 数据权限 | 继承权限 | 父角色 |
|--------|----------|----------|----------|------|----------|----------|--------|
| ROLE_UK_OPERATIONS_MANAGER | UK_OPERATIONS_MANAGER | 英国运营经理 | NORMAL | 3 | ALL | TRUE | ROLE_UK_DIRECTOR |
| ROLE_UK_BI_ANALYST | UK_BI_ANALYST | 英国BI分析师 | NORMAL | 4 | ALL | TRUE | ROLE_UK_OPERATIONS_MANAGER |

### 3. 技术支持层
| 角色ID | 角色代码 | 角色名称 | 角色类型 | 层级 | 数据权限 | 继承权限 | 父角色 |
|--------|----------|----------|----------|------|----------|----------|--------|
| ROLE_UK_IT_ADMIN | UK_IT_ADMIN | 英国IT管理员 | SYSTEM | 4 | ALL | TRUE | ROLE_UK_OPERATIONS_MANAGER |
| ROLE_UK_VIEWER | UK_VIEWER | 英国查看者 | READONLY | 5 | ALL | TRUE | ROLE_UK_BI_ANALYST |

**总计**: 6个角色

---

## 🏭 内网用户角色体系 (TENANT_INERT)

### 1. 生产管理层
| 角色ID | 角色代码 | 角色名称 | 角色类型 | 层级 | 数据权限 | 继承权限 | 父角色 |
|--------|----------|----------|----------|------|----------|----------|--------|
| ROLE_INERT_PRODUCTION_MANAGER | INERT_PRODUCTION_MANAGER | 生产经理 | NORMAL | 1 | DEPT_AND_CHILD | FALSE | - |
| ROLE_INERT_PLANNING_ENGINEER | INERT_PLANNING_ENGINEER | 计划工程师 | NORMAL | 2 | DEPT | TRUE | ROLE_INERT_PRODUCTION_MANAGER |
| ROLE_INERT_WORK_ORDER_CONTROLLER | INERT_WORK_ORDER_CONTROLLER | 工单控制员 | NORMAL | 3 | DEPT | TRUE | ROLE_INERT_PLANNING_ENGINEER |

### 2. 质量管理层
| 角色ID | 角色代码 | 角色名称 | 角色类型 | 层级 | 数据权限 | 继承权限 | 父角色 |
|--------|----------|----------|----------|------|----------|----------|--------|
| ROLE_INERT_QUALITY_MANAGER | INERT_QUALITY_MANAGER | 质量经理 | NORMAL | 1 | DEPT_AND_CHILD | FALSE | - |
| ROLE_INERT_IQC_INSPECTOR | INERT_IQC_INSPECTOR | IQC检验员 | NORMAL | 2 | DEPT | TRUE | ROLE_INERT_QUALITY_MANAGER |
| ROLE_INERT_IPQC_INSPECTOR | INERT_IPQC_INSPECTOR | IPQC巡检员 | NORMAL | 2 | DEPT | TRUE | ROLE_INERT_QUALITY_MANAGER |
| ROLE_INERT_OQC_INSPECTOR | INERT_OQC_INSPECTOR | OQC检验员 | NORMAL | 2 | DEPT | TRUE | ROLE_INERT_QUALITY_MANAGER |

### 3. 仓储物流层
| 角色ID | 角色代码 | 角色名称 | 角色类型 | 层级 | 数据权限 | 继承权限 | 父角色 |
|--------|----------|----------|----------|------|----------|----------|--------|
| ROLE_INERT_WAREHOUSE_MANAGER | INERT_WAREHOUSE_MANAGER | 仓库经理 | NORMAL | 1 | DEPT_AND_CHILD | FALSE | - |
| ROLE_INERT_MATERIAL_HANDLER | INERT_MATERIAL_HANDLER | 物料管理员 | NORMAL | 2 | DEPT | TRUE | ROLE_INERT_WAREHOUSE_MANAGER |
| ROLE_INERT_INVENTORY_CONTROLLER | INERT_INVENTORY_CONTROLLER | 盘点员 | NORMAL | 2 | DEPT | TRUE | ROLE_INERT_WAREHOUSE_MANAGER |

### 4. 生产执行层
| 角色ID | 角色代码 | 角色名称 | 角色类型 | 层级 | 数据权限 | 继承权限 | 父角色 |
|--------|----------|----------|----------|------|----------|----------|--------|
| ROLE_INERT_PRODUCTION_OPERATOR | INERT_PRODUCTION_OPERATOR | 生产操作员 | NORMAL | 2 | DEPT | TRUE | ROLE_INERT_PRODUCTION_MANAGER |
| ROLE_INERT_FAI_OPERATOR | INERT_FAI_OPERATOR | 首件验证员 | NORMAL | 3 | DEPT | TRUE | ROLE_INERT_PRODUCTION_OPERATOR |
| ROLE_INERT_TEST_OPERATOR | INERT_TEST_OPERATOR | 测试操作员 | NORMAL | 3 | DEPT | TRUE | ROLE_INERT_PRODUCTION_OPERATOR |

### 5. 维护支持层
| 角色ID | 角色代码 | 角色名称 | 角色类型 | 层级 | 数据权限 | 继承权限 | 父角色 |
|--------|----------|----------|----------|------|----------|----------|--------|
| ROLE_INERT_MAINTENANCE_MANAGER | INERT_MAINTENANCE_MANAGER | 维护经理 | NORMAL | 1 | DEPT_AND_CHILD | FALSE | - |
| ROLE_INERT_MAINTENANCE_TECHNICIAN | INERT_MAINTENANCE_TECHNICIAN | 维护技师 | NORMAL | 2 | DEPT | TRUE | ROLE_INERT_MAINTENANCE_MANAGER |

### 6. 追溯分析层
| 角色ID | 角色代码 | 角色名称 | 角色类型 | 层级 | 数据权限 | 继承权限 | 父角色 |
|--------|----------|----------|----------|------|----------|----------|--------|
| ROLE_INERT_TRACE_ANALYST | INERT_TRACE_ANALYST | 追溯分析师 | NORMAL | 2 | ALL | TRUE | ROLE_INERT_QUALITY_MANAGER |

### 7. 四个核心部门角色

#### 7.1 工程部门角色
| 角色ID | 角色代码 | 角色名称 | 角色类型 | 层级 | 数据权限 | 继承权限 | 父角色 |
|--------|----------|----------|----------|------|----------|----------|--------|
| ROLE_INERT_ENGINEER | INERT_ENGINEER | 工程工程师 | NORMAL | 1 | DEPT | FALSE | - |
| ROLE_INERT_ENGINEER_LEADER | INERT_ENGINEER_LEADER | 工程部门主管 | MANAGER | 2 | DEPT_AND_CHILD | TRUE | ROLE_INERT_ENGINEER |

#### 7.2 品质部门角色
| 角色ID | 角色代码 | 角色名称 | 角色类型 | 层级 | 数据权限 | 继承权限 | 父角色 |
|--------|----------|----------|----------|------|----------|----------|--------|
| ROLE_INERT_QC_INSPECTOR | INERT_QC_INSPECTOR | 品质检验员 | NORMAL | 1 | DEPT | FALSE | - |
| ROLE_INERT_QC_MANAGER | INERT_QC_MANAGER | 品质经理 | MANAGER | 2 | DEPT_AND_CHILD | TRUE | ROLE_INERT_QC_INSPECTOR |

#### 7.3 生产部门角色
| 角色ID | 角色代码 | 角色名称 | 角色类型 | 层级 | 数据权限 | 继承权限 | 父角色 |
|--------|----------|----------|----------|------|----------|----------|--------|
| ROLE_INERT_PRODUCTION_OPERATOR | INERT_PRODUCTION_OPERATOR | 生产操作员 | NORMAL | 1 | DEPT | FALSE | - |
| ROLE_INERT_PRODUCTION_MANAGER | INERT_PRODUCTION_MANAGER | 生产经理 | MANAGER | 2 | DEPT_AND_CHILD | TRUE | ROLE_INERT_PRODUCTION_OPERATOR |

#### 7.4 物流部门角色
| 角色ID | 角色代码 | 角色名称 | 角色类型 | 层级 | 数据权限 | 继承权限 | 父角色 |
|--------|----------|----------|----------|------|----------|----------|--------|
| ROLE_INERT_LOGISTICS_OPERATOR | INERT_LOGISTICS_OPERATOR | 物流操作员 | NORMAL | 1 | DEPT | FALSE | - |
| ROLE_INERT_LOGISTICS_MANAGER | INERT_LOGISTICS_MANAGER | 物流经理 | MANAGER | 2 | DEPT_AND_CHILD | TRUE | ROLE_INERT_LOGISTICS_OPERATOR |

### 8. 系统管理层
| 角色ID | 角色代码 | 角色名称 | 角色类型 | 层级 | 数据权限 | 继承权限 | 父角色 |
|--------|----------|----------|----------|------|----------|----------|--------|
| ROLE_INERT_SYSTEM_ADMIN | INERT_SYSTEM_ADMIN | 内网系统管理员 | SYSTEM | 1 | ALL | FALSE | - |

**内网用户总计**: 21个角色

---

## 🏪 供应商群体角色体系 (TENANT_SUPPLIER)

### 1. 模具供应商
| 角色ID | 角色代码 | 角色名称 | 角色类型 | 层级 | 数据权限 | 继承权限 | 父角色 |
|--------|----------|----------|----------|------|----------|----------|--------|
| ROLE_SUPPLIER_MOLD_MANAGER | SUPPLIER_MOLD_MANAGER | 模具供应商经理 | SUPPLIER | 1 | DEPT | FALSE | - |
| ROLE_SUPPLIER_MOLD_OPERATOR | SUPPLIER_MOLD_OPERATOR | 模具操作员 | SUPPLIER | 2 | DEPT | TRUE | ROLE_SUPPLIER_MOLD_MANAGER |

### 2. 原材料供应商
| 角色ID | 角色代码 | 角色名称 | 角色类型 | 层级 | 数据权限 | 继承权限 | 父角色 |
|--------|----------|----------|----------|------|----------|----------|--------|
| ROLE_SUPPLIER_RAW_MANAGER | SUPPLIER_RAW_MANAGER | 原材料供应商经理 | SUPPLIER | 1 | DEPT | FALSE | - |
| ROLE_SUPPLIER_RAW_OPERATOR | SUPPLIER_RAW_OPERATOR | 原材料操作员 | SUPPLIER | 2 | DEPT | TRUE | ROLE_SUPPLIER_RAW_MANAGER |

**供应商群体总计**: 4个角色

---

## 📊 角色统计汇总

### 1. 按租户统计
| 租户 | 角色数量 | 百分比 |
|------|----------|--------|
| 英国总公司 (UK_HEAD) | 6 | 19.4% |
| 内网用户 (INERT) | 21 | 67.7% |
| 供应商群体 (SUPPLIER) | 4 | 12.9% |
| **总计** | **31** | **100%** |

### 2. 按角色类型统计
| 角色类型 | 角色数量 | 百分比 |
|----------|----------|--------|
| NORMAL | 22 | 71.0% |
| SYSTEM | 5 | 16.1% |
| MANAGER | 4 | 12.9% |
| SUPPLIER | 4 | 12.9% |
| READONLY | 1 | 3.2% |

### 3. 按数据权限统计
| 数据权限 | 角色数量 | 百分比 |
|----------|----------|--------|
| DEPT | 15 | 48.4% |
| DEPT_AND_CHILD | 8 | 25.8% |
| ALL | 8 | 25.8% |

### 4. 按层级统计
| 层级 | 角色数量 | 百分比 |
|------|----------|--------|
| 1级 (顶级) | 11 | 35.5% |
| 2级 | 14 | 45.2% |
| 3级 | 4 | 12.9% |
| 4级 | 1 | 3.2% |
| 5级 | 1 | 3.2% |

---

## 🎯 角色设计特点

### 1. 层级化设计
- **支持角色继承**: 子角色继承父角色的权限
- **清晰的层级结构**: 1-5级层级，便于权限管理
- **数据权限递增**: 从DEPT到DEPT_AND_CHILD到ALL

### 2. 模块化设计
- **按功能模块划分**: 生产、质量、物流、维护等
- **按部门划分**: 工程、品质、生产、物流四个核心部门
- **按租户隔离**: 三个租户有独立的角色体系

### 3. 权限粒度控制
- **数据权限**: DEPT(部门) / DEPT_AND_CHILD(部门及子部门) / ALL(全部)
- **操作权限**: 通过权限表控制具体的操作权限
- **继承机制**: 支持权限和数据范围的继承

### 4. 业务场景适配
- **生产管理**: 从经理到操作员的完整层级
- **质量管理**: IQC、IPQC、OQC三个检验环节
- **物流管理**: 仓库、物料、库存管理
- **维护支持**: 维护经理和技术员
- **追溯分析**: 跨部门的数据分析权限

---

## 🔍 查询示例

### 1. 查询所有角色
```sql
SELECT 
    role_code,
    role_name,
    role_type,
    role_level,
    data_scope,
    tenant_id
FROM sys_role 
ORDER BY tenant_id, role_level, role_code;
```

### 2. 查询角色继承关系
```sql
SELECT 
    child.role_name AS child_role,
    parent.role_name AS parent_role,
    child.role_level,
    child.inherit_permissions
FROM sys_role child
LEFT JOIN sys_role parent ON child.parent_role_id = parent.role_id
ORDER BY child.role_level, child.role_name;
```

### 3. 按租户统计角色
```sql
SELECT 
    tenant_id,
    COUNT(*) AS role_count,
    COUNT(CASE WHEN role_level = 1 THEN 1 END) AS top_level_roles,
    COUNT(CASE WHEN data_scope = 'ALL' THEN 1 END) AS all_scope_roles
FROM sys_role 
GROUP BY tenant_id
ORDER BY tenant_id;
```

---

## 📋 总结

### 1. 设计优势
- ✅ **完整的业务覆盖**: 涵盖MES系统的所有主要业务流程
- ✅ **灵活的权限控制**: 支持细粒度的数据权限和操作权限
- ✅ **清晰的层级结构**: 便于权限管理和角色继承
- ✅ **多租户支持**: 不同租户有独立的角色体系

### 2. 扩展性
- ✅ **易于添加新角色**: 基于现有的层级结构
- ✅ **支持角色组合**: 用户可以有多个角色
- ✅ **权限动态调整**: 支持运行时权限变更
- ✅ **跨部门协作**: 支持跨部门的角色分配

### 3. 管理便利性
- ✅ **角色继承**: 减少权限配置的复杂性
- ✅ **标准化命名**: 统一的角色命名规范
- ✅ **文档完整**: 详细的角色说明和权限定义
- ✅ **查询支持**: 丰富的查询接口和统计功能

这个角色体系为MES系统提供了完整、灵活、可扩展的权限管理基础，能够很好地支持复杂的业务场景和组织架构需求。
