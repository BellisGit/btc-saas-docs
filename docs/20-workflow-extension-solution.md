# MESç³»ç»ŸåŠ¨æ€æµç¨‹æ‰©å±•è§£å†³æ–¹æ¡ˆ

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£ä¸“é—¨é’ˆå¯¹MESç³»ç»Ÿä¸­çš„æµç¨‹æ‰©å±•éœ€æ±‚ï¼Œè®¾è®¡äº†ä¸€ä¸ªæ”¯æŒåŠ¨æ€æ·»åŠ æµç¨‹èŠ‚ç‚¹ã€åˆ†æ”¯æµç¨‹ã€æµç¨‹æ ‘ç»“æ„çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚åŸºäº**æµç¨‹æ ‘ + èŠ‚ç‚¹å…ƒæ•°æ® + çŠ¶æ€æœº**çš„æ¶æ„ï¼Œå®ç°æµç¨‹çš„é›¶åœæœºæ‰©å±•ã€‚è¯¥æ–¹æ¡ˆå®Œå…¨ç¬¦åˆç°æœ‰MESç³»ç»Ÿçš„ä¸»æµç¨‹+å¤šåˆ†æ”¯æ¶æ„ï¼Œä¿æŒä¸ç°æœ‰æ¶æ„çš„å®Œå…¨å…¼å®¹æ€§ã€‚

## ğŸ” æµç¨‹æ‰©å±•éœ€æ±‚åˆ†æ

### 1. ç°æœ‰MESæµç¨‹æ¶æ„åˆ†æ

#### ä¸»æµç¨‹ç»“æ„ï¼ˆä¸»å¹²ï¼‰
```
è®¢å•éœ€æ±‚å‘èµ· â†’ èµ„æºå‡†å¤‡ â†’ ç”Ÿäº§æ‰§è¡Œ â†’ ç‰©æµä»“å‚¨ â†’ å“è´¨ä¸å‡ºè´§ â†’ æ•°æ®è¿½æº¯ä¸åˆ†æ â†’ æµç¨‹é—­ç¯å½’æ¡£
```

#### åˆ†æ”¯æµç¨‹ç»“æ„ï¼ˆå­æµç¨‹ï¼‰

##### IQCæ£€éªŒå­æµç¨‹
```
ç‰©æ–™åˆ°è´§/å»ºGRN â†’ åˆ›å»ºIQCæ£€éªŒå• â†’ AQLæŠ½æ ·ä¸æ£€æµ‹
    â†“
    â”œâ”€â”€ åˆæ ¼ â†’ å…¥åº“ç™»è®°â†’å¯ç”¨åº“å­˜ â†’ æ£€éªŒæŠ¥å‘Šå½’æ¡£
    â””â”€â”€ ä¸åˆæ ¼ â†’ ä¸åˆæ ¼éš”ç¦» â†’ ç‰¹é‡‡/é€€è´§/ç«‹NCR â†’ ä¾›åº”å•†è¯„åˆ†è”åŠ¨
```

##### ç”Ÿäº§+IPQCå­æµç¨‹
```
å·¥å•ä¸‹å‘ â†’ å¤‡æ–™äº¤ä»˜ç”Ÿäº§ â†’ è£…é…/ç»„è£… â†’ é¦–ä»¶éªŒè¯FAI
    â†“
    â”œâ”€â”€ é€šè¿‡ â†’ æ‰¹é‡ç”Ÿäº§ â†’ IPQCå·¡æ£€åŠ¨æ€é¢‘æ¬¡
    â”‚   â†“
    â”‚   â”œâ”€â”€ åˆæ ¼ â†’ åˆæµ‹â†’ç»ˆæµ‹â†’æ‰“åŒ…
    â”‚   â””â”€â”€ ä¸åˆæ ¼ â†’ æš‚åœâ†’è¿”ä¿®åˆ†ææ¬¡æ•°ä¸Šé™
    â””â”€â”€ æœªé€šè¿‡ â†’ å·¥è‰ºå‚æ•°è°ƒæ•´â†’é‡æµ‹
```

### 2. æµç¨‹æ‰©å±•åœºæ™¯

#### ä¸»æµç¨‹æ‰©å±•
```
åŸå§‹æµç¨‹ï¼š
è®¢å•æ¥æ”¶ â†’ ç”Ÿäº§è®¡åˆ’ â†’ ç”Ÿäº§æ‰§è¡Œ â†’ è´¨é‡æ£€éªŒ â†’ åŒ…è£…å‘è´§

æ‰©å±•åæµç¨‹ï¼š
è®¢å•æ¥æ”¶ â†’ é£é™©è¯„ä¼° â†’ ç”Ÿäº§è®¡åˆ’ â†’ ç‰©æ–™å‡†å¤‡ â†’ ç”Ÿäº§æ‰§è¡Œ â†’ 
é¦–ä»¶æ£€éªŒ â†’ è¿‡ç¨‹æ£€éªŒ â†’ è´¨é‡æ£€éªŒ â†’ åŒ…è£…å‡†å¤‡ â†’ åŒ…è£…å‘è´§ â†’ ç‰©æµé…é€
```

#### åˆ†æ”¯æµç¨‹æ‰©å±•
```
ä¸»æµç¨‹ï¼šç”Ÿäº§æ‰§è¡Œ
â”œâ”€â”€ åˆ†æ”¯Aï¼šæ³¨å¡‘æµç¨‹
â”‚   â”œâ”€â”€ æ¨¡å…·é¢„çƒ­ â†’ æ³¨å¡‘æˆå‹ â†’ å†·å´è„±æ¨¡ â†’ å¤–è§‚æ£€éªŒ
â”œâ”€â”€ åˆ†æ”¯Bï¼šè£…é…æµç¨‹  
â”‚   â”œâ”€â”€ é›¶ä»¶å‡†å¤‡ â†’ è£…é…ä½œä¸š â†’ åŠŸèƒ½æµ‹è¯• â†’ æœ€ç»ˆæ£€éªŒ
â””â”€â”€ åˆ†æ”¯Cï¼šåŒ…è£…æµç¨‹ï¼ˆæ–°å¢ï¼‰
    â”œâ”€â”€ åŒ…è£…è®¾è®¡ â†’ åŒ…è£…åˆ¶ä½œ â†’ åŒ…è£…æµ‹è¯• â†’ åŒ…è£…ç¡®è®¤
```

#### æ¡ä»¶åˆ†æ”¯æ‰©å±•
```
åŸå§‹ï¼šif (äº§å“ç±»å‹ == "æ ‡å‡†") â†’ æ ‡å‡†æµç¨‹
æ‰©å±•ï¼šif (äº§å“ç±»å‹ == "æ ‡å‡†") â†’ æ ‡å‡†æµç¨‹
     if (äº§å“ç±»å‹ == "å®šåˆ¶") â†’ å®šåˆ¶æµç¨‹  
     if (äº§å“ç±»å‹ == "ç´§æ€¥") â†’ ç´§æ€¥æµç¨‹
     if (å®¢æˆ·è¦æ±‚ == "ç‰¹æ®ŠåŒ…è£…") â†’ ç‰¹æ®ŠåŒ…è£…æµç¨‹
```

## ğŸ—ï¸ åŠ¨æ€æµç¨‹æ¶æ„è®¾è®¡

### 1. æ ¸å¿ƒè¡¨ç»“æ„è®¾è®¡

#### æµç¨‹å®šä¹‰è¡¨
```sql
-- æµç¨‹å®šä¹‰è¡¨ï¼ˆå­˜å‚¨æµç¨‹æ ‘ç»“æ„ï¼‰
CREATE TABLE workflow_definition (
    workflow_id VARCHAR(40) PRIMARY KEY COMMENT 'æµç¨‹ID',
    workflow_code VARCHAR(64) NOT NULL UNIQUE COMMENT 'æµç¨‹ä»£ç ',
    workflow_name VARCHAR(128) NOT NULL COMMENT 'æµç¨‹åç§°',
    workflow_type ENUM('MAIN', 'SUB', 'BRANCH') NOT NULL COMMENT 'æµç¨‹ç±»å‹',
    parent_workflow_id VARCHAR(40) COMMENT 'çˆ¶æµç¨‹ID',
    workflow_level INT DEFAULT 1 COMMENT 'æµç¨‹å±‚çº§',
    workflow_path VARCHAR(500) COMMENT 'æµç¨‹è·¯å¾„',
    workflow_config JSON COMMENT 'æµç¨‹é…ç½®',
    is_active TINYINT(1) DEFAULT 1 COMMENT 'æ˜¯å¦å¯ç”¨',
    version INT DEFAULT 1 COMMENT 'ç‰ˆæœ¬å·',
    tenant_id VARCHAR(32) COMMENT 'ç§Ÿæˆ·ID',
    created_by VARCHAR(64) NOT NULL,
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_by VARCHAR(64),
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    FOREIGN KEY (parent_workflow_id) REFERENCES workflow_definition(workflow_id),
    INDEX idx_workflow_code (workflow_code),
    INDEX idx_parent_workflow (parent_workflow_id),
    INDEX idx_workflow_level (workflow_level),
    INDEX idx_tenant (tenant_id)
) COMMENT 'æµç¨‹å®šä¹‰è¡¨';

-- èŠ‚ç‚¹å®šä¹‰è¡¨ï¼ˆå­˜å‚¨æµç¨‹èŠ‚ç‚¹ä¿¡æ¯ï¼‰
CREATE TABLE workflow_node_definition (
    node_id VARCHAR(40) PRIMARY KEY COMMENT 'èŠ‚ç‚¹ID',
    node_code VARCHAR(64) NOT NULL COMMENT 'èŠ‚ç‚¹ä»£ç ',
    node_name VARCHAR(128) NOT NULL COMMENT 'èŠ‚ç‚¹åç§°',
    workflow_id VARCHAR(40) NOT NULL COMMENT 'æ‰€å±æµç¨‹ID',
    node_type ENUM('START', 'PROCESS', 'DECISION', 'PARALLEL', 'MERGE', 'END') NOT NULL COMMENT 'èŠ‚ç‚¹ç±»å‹',
    node_config JSON COMMENT 'èŠ‚ç‚¹é…ç½®',
    position_x INT DEFAULT 0 COMMENT 'Xåæ ‡',
    position_y INT DEFAULT 0 COMMENT 'Yåæ ‡',
    sort_order INT DEFAULT 0 COMMENT 'æ’åº',
    is_active TINYINT(1) DEFAULT 1 COMMENT 'æ˜¯å¦å¯ç”¨',
    tenant_id VARCHAR(32) COMMENT 'ç§Ÿæˆ·ID',
    created_by VARCHAR(64) NOT NULL,
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_by VARCHAR(64),
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    FOREIGN KEY (workflow_id) REFERENCES workflow_definition(workflow_id),
    UNIQUE KEY uk_node_code_workflow (node_code, workflow_id),
    INDEX idx_workflow_id (workflow_id),
    INDEX idx_node_type (node_type),
    INDEX idx_tenant (tenant_id)
) COMMENT 'èŠ‚ç‚¹å®šä¹‰è¡¨';

-- èŠ‚ç‚¹è¿æ¥è¡¨ï¼ˆå­˜å‚¨èŠ‚ç‚¹é—´çš„å…³ç³»ï¼‰
CREATE TABLE workflow_node_connection (
    connection_id VARCHAR(40) PRIMARY KEY COMMENT 'è¿æ¥ID',
    from_node_id VARCHAR(40) NOT NULL COMMENT 'æºèŠ‚ç‚¹ID',
    to_node_id VARCHAR(40) NOT NULL COMMENT 'ç›®æ ‡èŠ‚ç‚¹ID',
    workflow_id VARCHAR(40) NOT NULL COMMENT 'æ‰€å±æµç¨‹ID',
    connection_type ENUM('SEQUENCE', 'CONDITION', 'PARALLEL', 'MERGE') DEFAULT 'SEQUENCE' COMMENT 'è¿æ¥ç±»å‹',
    condition_expression TEXT COMMENT 'æ¡ä»¶è¡¨è¾¾å¼',
    connection_config JSON COMMENT 'è¿æ¥é…ç½®',
    is_active TINYINT(1) DEFAULT 1 COMMENT 'æ˜¯å¦å¯ç”¨',
    tenant_id VARCHAR(32) COMMENT 'ç§Ÿæˆ·ID',
    created_by VARCHAR(64) NOT NULL,
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_by VARCHAR(64),
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    FOREIGN KEY (from_node_id) REFERENCES workflow_node_definition(node_id),
    FOREIGN KEY (to_node_id) REFERENCES workflow_node_definition(node_id),
    FOREIGN KEY (workflow_id) REFERENCES workflow_definition(workflow_id),
    INDEX idx_from_node (from_node_id),
    INDEX idx_to_node (to_node_id),
    INDEX idx_workflow_id (workflow_id),
    INDEX idx_tenant (tenant_id)
) COMMENT 'èŠ‚ç‚¹è¿æ¥è¡¨';
```

#### MESç‰¹å®šæµç¨‹è¡¨ç»“æ„
```sql
-- ä¸»æµç¨‹å®šä¹‰è¡¨
CREATE TABLE mes_main_workflow (
    workflow_id VARCHAR(32) PRIMARY KEY,
    workflow_code VARCHAR(64) NOT NULL UNIQUE COMMENT 'ä¸»æµç¨‹ä»£ç ',
    workflow_name VARCHAR(128) NOT NULL COMMENT 'ä¸»æµç¨‹åç§°',
    workflow_order INT DEFAULT 1 COMMENT 'æµç¨‹é¡ºåº',
    workflow_config JSON COMMENT 'æµç¨‹é…ç½®',
    is_active TINYINT(1) DEFAULT 1,
    tenant_id VARCHAR(32),
    created_by VARCHAR(64) NOT NULL,
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_by VARCHAR(64),
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_workflow_code (workflow_code),
    INDEX idx_workflow_order (workflow_order),
    INDEX idx_tenant (tenant_id)
) COMMENT 'MESä¸»æµç¨‹å®šä¹‰è¡¨';

-- åˆ†æ”¯æµç¨‹å®šä¹‰è¡¨
CREATE TABLE mes_sub_workflow (
    sub_workflow_id VARCHAR(32) PRIMARY KEY,
    sub_workflow_code VARCHAR(64) NOT NULL COMMENT 'åˆ†æ”¯æµç¨‹ä»£ç ',
    sub_workflow_name VARCHAR(128) NOT NULL COMMENT 'åˆ†æ”¯æµç¨‹åç§°',
    parent_workflow_id VARCHAR(32) NOT NULL COMMENT 'æ‰€å±ä¸»æµç¨‹ID',
    entry_condition JSON COMMENT 'è¿›å…¥æ¡ä»¶',
    exit_condition JSON COMMENT 'é€€å‡ºæ¡ä»¶',
    sub_workflow_config JSON COMMENT 'åˆ†æ”¯æµç¨‹é…ç½®',
    is_active TINYINT(1) DEFAULT 1,
    tenant_id VARCHAR(32),
    created_by VARCHAR(64) NOT NULL,
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_by VARCHAR(64),
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    FOREIGN KEY (parent_workflow_id) REFERENCES mes_main_workflow(workflow_id),
    INDEX idx_parent_workflow (parent_workflow_id),
    INDEX idx_sub_workflow_code (sub_workflow_code),
    INDEX idx_tenant (tenant_id)
) COMMENT 'MESåˆ†æ”¯æµç¨‹å®šä¹‰è¡¨';

-- æµç¨‹èŠ‚ç‚¹å®šä¹‰è¡¨
CREATE TABLE mes_workflow_node (
    node_id VARCHAR(32) PRIMARY KEY,
    node_code VARCHAR(64) NOT NULL COMMENT 'èŠ‚ç‚¹ä»£ç ',
    node_name VARCHAR(128) NOT NULL COMMENT 'èŠ‚ç‚¹åç§°',
    workflow_id VARCHAR(32) COMMENT 'æ‰€å±ä¸»æµç¨‹ID',
    sub_workflow_id VARCHAR(32) COMMENT 'æ‰€å±åˆ†æ”¯æµç¨‹ID',
    node_type ENUM('START', 'PROCESS', 'DECISION', 'PARALLEL', 'MERGE', 'END') NOT NULL COMMENT 'èŠ‚ç‚¹ç±»å‹',
    processor_class VARCHAR(255) COMMENT 'å¤„ç†å™¨ç±»å',
    node_config JSON COMMENT 'èŠ‚ç‚¹é…ç½®',
    position_x INT DEFAULT 0 COMMENT 'Xåæ ‡',
    position_y INT DEFAULT 0 COMMENT 'Yåæ ‡',
    sort_order INT DEFAULT 0 COMMENT 'æ’åº',
    is_active TINYINT(1) DEFAULT 1,
    tenant_id VARCHAR(32),
    created_by VARCHAR(64) NOT NULL,
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_by VARCHAR(64),
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    FOREIGN KEY (workflow_id) REFERENCES mes_main_workflow(workflow_id),
    FOREIGN KEY (sub_workflow_id) REFERENCES mes_sub_workflow(sub_workflow_id),
    INDEX idx_workflow_id (workflow_id),
    INDEX idx_sub_workflow_id (sub_workflow_id),
    INDEX idx_node_type (node_type),
    INDEX idx_tenant (tenant_id)
) COMMENT 'MESæµç¨‹èŠ‚ç‚¹å®šä¹‰è¡¨';

-- æµç¨‹èŠ‚ç‚¹è¿æ¥è¡¨
CREATE TABLE mes_node_connection (
    connection_id VARCHAR(32) PRIMARY KEY,
    from_node_id VARCHAR(32) NOT NULL COMMENT 'æºèŠ‚ç‚¹ID',
    to_node_id VARCHAR(32) NOT NULL COMMENT 'ç›®æ ‡èŠ‚ç‚¹ID',
    connection_type ENUM('SEQUENCE', 'CONDITION', 'PARALLEL', 'MERGE') DEFAULT 'SEQUENCE' COMMENT 'è¿æ¥ç±»å‹',
    condition_expression TEXT COMMENT 'æ¡ä»¶è¡¨è¾¾å¼',
    connection_config JSON COMMENT 'è¿æ¥é…ç½®',
    is_active TINYINT(1) DEFAULT 1,
    tenant_id VARCHAR(32),
    created_by VARCHAR(64) NOT NULL,
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_by VARCHAR(64),
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    FOREIGN KEY (from_node_id) REFERENCES mes_workflow_node(node_id),
    FOREIGN KEY (to_node_id) REFERENCES mes_workflow_node(node_id),
    INDEX idx_from_node (from_node_id),
    INDEX idx_to_node (to_node_id),
    INDEX idx_tenant (tenant_id)
) COMMENT 'MESèŠ‚ç‚¹è¿æ¥è¡¨';
```

#### æµç¨‹å®ä¾‹å’Œæ‰§è¡Œè¡¨
```sql
-- æµç¨‹å®ä¾‹è¡¨
CREATE TABLE workflow_instance (
    instance_id VARCHAR(40) PRIMARY KEY COMMENT 'å®ä¾‹ID',
    workflow_id VARCHAR(40) NOT NULL COMMENT 'æµç¨‹ID',
    instance_name VARCHAR(128) COMMENT 'å®ä¾‹åç§°',
    instance_status ENUM('RUNNING', 'COMPLETED', 'FAILED', 'CANCELLED', 'SUSPENDED') DEFAULT 'RUNNING' COMMENT 'å®ä¾‹çŠ¶æ€',
    start_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'å¼€å§‹æ—¶é—´',
    end_time DATETIME COMMENT 'ç»“æŸæ—¶é—´',
    context_data JSON COMMENT 'ä¸Šä¸‹æ–‡æ•°æ®',
    current_node_id VARCHAR(40) COMMENT 'å½“å‰èŠ‚ç‚¹ID',
    parent_instance_id VARCHAR(40) COMMENT 'çˆ¶å®ä¾‹ID',
    tenant_id VARCHAR(32) COMMENT 'ç§Ÿæˆ·ID',
    created_by VARCHAR(64) NOT NULL,
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_by VARCHAR(64),
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    FOREIGN KEY (workflow_id) REFERENCES workflow_definition(workflow_id),
    FOREIGN KEY (current_node_id) REFERENCES workflow_node_definition(node_id),
    FOREIGN KEY (parent_instance_id) REFERENCES workflow_instance(instance_id),
    INDEX idx_workflow_id (workflow_id),
    INDEX idx_instance_status (instance_status),
    INDEX idx_current_node (current_node_id),
    INDEX idx_tenant (tenant_id)
) COMMENT 'æµç¨‹å®ä¾‹è¡¨';

-- èŠ‚ç‚¹æ‰§è¡Œè®°å½•è¡¨
CREATE TABLE workflow_node_execution (
    execution_id VARCHAR(40) PRIMARY KEY COMMENT 'æ‰§è¡ŒID',
    instance_id VARCHAR(40) NOT NULL COMMENT 'å®ä¾‹ID',
    node_id VARCHAR(40) NOT NULL COMMENT 'èŠ‚ç‚¹ID',
    execution_status ENUM('PENDING', 'RUNNING', 'COMPLETED', 'FAILED', 'SKIPPED') DEFAULT 'PENDING' COMMENT 'æ‰§è¡ŒçŠ¶æ€',
    start_time DATETIME COMMENT 'å¼€å§‹æ—¶é—´',
    end_time DATETIME COMMENT 'ç»“æŸæ—¶é—´',
    execution_result JSON COMMENT 'æ‰§è¡Œç»“æœ',
    error_message TEXT COMMENT 'é”™è¯¯ä¿¡æ¯',
    retry_count INT DEFAULT 0 COMMENT 'é‡è¯•æ¬¡æ•°',
    assigned_user VARCHAR(64) COMMENT 'åˆ†é…ç”¨æˆ·',
    tenant_id VARCHAR(32) COMMENT 'ç§Ÿæˆ·ID',
    created_by VARCHAR(64) NOT NULL,
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_by VARCHAR(64),
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    FOREIGN KEY (instance_id) REFERENCES workflow_instance(instance_id),
    FOREIGN KEY (node_id) REFERENCES workflow_node_definition(node_id),
    INDEX idx_instance_id (instance_id),
    INDEX idx_node_id (node_id),
    INDEX idx_execution_status (execution_status),
    INDEX idx_assigned_user (assigned_user),
    INDEX idx_tenant (tenant_id)
) COMMENT 'èŠ‚ç‚¹æ‰§è¡Œè®°å½•è¡¨';
```

### 2. æµç¨‹å¼•æ“è®¾è®¡

#### æµç¨‹å¼•æ“æ ¸å¿ƒç±»
```java
@Service
public class WorkflowEngine {
    
    @Autowired
    private WorkflowDefinitionRepository workflowDefinitionRepository;
    
    @Autowired
    private WorkflowNodeDefinitionRepository nodeDefinitionRepository;
    
    @Autowired
    private WorkflowNodeConnectionRepository connectionRepository;
    
    @Autowired
    private WorkflowInstanceRepository instanceRepository;
    
    @Autowired
    private WorkflowNodeExecutionRepository executionRepository;
    
    /**
     * å¯åŠ¨æµç¨‹å®ä¾‹
     */
    public WorkflowInstance startWorkflow(String workflowId, Map<String, Object> contextData) {
        // 1. è·å–æµç¨‹å®šä¹‰
        WorkflowDefinition workflow = workflowDefinitionRepository.findById(workflowId)
            .orElseThrow(() -> new WorkflowException("æµç¨‹ä¸å­˜åœ¨"));
        
        // 2. åˆ›å»ºæµç¨‹å®ä¾‹
        WorkflowInstance instance = new WorkflowInstance();
        instance.setInstanceId(UUID.randomUUID().toString());
        instance.setWorkflowId(workflowId);
        instance.setInstanceStatus(WorkflowStatus.RUNNING);
        instance.setContextData(contextData);
        
        // 3. æ‰¾åˆ°å¼€å§‹èŠ‚ç‚¹
        WorkflowNodeDefinition startNode = nodeDefinitionRepository
            .findByWorkflowIdAndNodeType(workflowId, NodeType.START)
            .stream()
            .findFirst()
            .orElseThrow(() -> new WorkflowException("æµç¨‹æ²¡æœ‰å¼€å§‹èŠ‚ç‚¹"));
        
        instance.setCurrentNodeId(startNode.getNodeId());
        instanceRepository.save(instance);
        
        // 4. æ‰§è¡Œå¼€å§‹èŠ‚ç‚¹
        executeNode(instance, startNode);
        
        return instance;
    }
    
    /**
     * æ‰§è¡ŒèŠ‚ç‚¹
     */
    public void executeNode(WorkflowInstance instance, WorkflowNodeDefinition node) {
        try {
            // 1. åˆ›å»ºæ‰§è¡Œè®°å½•
            WorkflowNodeExecution execution = new WorkflowNodeExecution();
            execution.setExecutionId(UUID.randomUUID().toString());
            execution.setInstanceId(instance.getInstanceId());
            execution.setNodeId(node.getNodeId());
            execution.setExecutionStatus(ExecutionStatus.RUNNING);
            execution.setStartTime(LocalDateTime.now());
            executionRepository.save(execution);
            
            // 2. æ‰§è¡ŒèŠ‚ç‚¹å¤„ç†å™¨
            NodeProcessor processor = getNodeProcessor(node);
            ExecutionResult result = processor.execute(instance, node);
            
            // 3. æ›´æ–°æ‰§è¡Œè®°å½•
            execution.setExecutionStatus(ExecutionStatus.COMPLETED);
            execution.setEndTime(LocalDateTime.now());
            execution.setExecutionResult(result.getData());
            executionRepository.save(execution);
            
            // 4. æŸ¥æ‰¾ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
            List<WorkflowNodeConnection> connections = connectionRepository
                .findByFromNodeIdAndIsActive(node.getNodeId(), true);
            
            for (WorkflowNodeConnection connection : connections) {
                if (evaluateCondition(connection, instance.getContextData())) {
                    WorkflowNodeDefinition nextNode = nodeDefinitionRepository
                        .findById(connection.getToNodeId())
                        .orElseThrow(() -> new WorkflowException("ç›®æ ‡èŠ‚ç‚¹ä¸å­˜åœ¨"));
                    
                    // 5. æ›´æ–°å½“å‰èŠ‚ç‚¹
                    instance.setCurrentNodeId(nextNode.getNodeId());
                    instanceRepository.save(instance);
                    
                    // 6. é€’å½’æ‰§è¡Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹
                    executeNode(instance, nextNode);
                    break;
                }
            }
            
            // 7. æ£€æŸ¥æ˜¯å¦åˆ°è¾¾ç»“æŸèŠ‚ç‚¹
            if (node.getNodeType() == NodeType.END) {
                completeWorkflow(instance);
            }
            
        } catch (Exception e) {
            // å¤„ç†æ‰§è¡Œå¼‚å¸¸
            handleNodeExecutionError(instance, node, e);
        }
    }
    
    /**
     * å®Œæˆæµç¨‹
     */
    private void completeWorkflow(WorkflowInstance instance) {
        instance.setInstanceStatus(WorkflowStatus.COMPLETED);
        instance.setEndTime(LocalDateTime.now());
        instanceRepository.save(instance);
    }
    
    /**
     * è·å–èŠ‚ç‚¹å¤„ç†å™¨
     */
    private NodeProcessor getNodeProcessor(WorkflowNodeDefinition node) {
        String processorClass = node.getNodeConfig().getString("processorClass");
        return applicationContext.getBean(processorClass, NodeProcessor.class);
    }
    
    /**
     * è¯„ä¼°è¿æ¥æ¡ä»¶
     */
    private boolean evaluateCondition(WorkflowNodeConnection connection, Map<String, Object> contextData) {
        if (connection.getConnectionType() == ConnectionType.SEQUENCE) {
            return true;
        }
        
        String expression = connection.getConditionExpression();
        if (StringUtils.isEmpty(expression)) {
            return true;
        }
        
        // ä½¿ç”¨è¡¨è¾¾å¼å¼•æ“è¯„ä¼°æ¡ä»¶
        return expressionEvaluator.evaluate(expression, contextData);
    }
}
```

#### èŠ‚ç‚¹å¤„ç†å™¨æ¥å£
```java
public interface NodeProcessor {
    
    /**
     * æ‰§è¡ŒèŠ‚ç‚¹é€»è¾‘
     */
    ExecutionResult execute(WorkflowInstance instance, WorkflowNodeDefinition node);
    
    /**
     * è·å–å¤„ç†å™¨ç±»å‹
     */
    NodeType getSupportedNodeType();
    
    /**
     * è·å–å¤„ç†å™¨åç§°
     */
    String getProcessorName();
}

@Component
public class StartNodeProcessor implements NodeProcessor {
    
    @Override
    public ExecutionResult execute(WorkflowInstance instance, WorkflowNodeDefinition node) {
        // å¼€å§‹èŠ‚ç‚¹é€»è¾‘
        Map<String, Object> result = new HashMap<>();
        result.put("message", "æµç¨‹å¼€å§‹æ‰§è¡Œ");
        result.put("timestamp", LocalDateTime.now());
        
        return ExecutionResult.success(result);
    }
    
    @Override
    public NodeType getSupportedNodeType() {
        return NodeType.START;
    }
    
    @Override
    public String getProcessorName() {
        return "StartNodeProcessor";
    }
}

@Component
public class ProcessNodeProcessor implements NodeProcessor {
    
    @Override
    public ExecutionResult execute(WorkflowInstance instance, WorkflowNodeDefinition node) {
        // å¤„ç†èŠ‚ç‚¹é€»è¾‘
        Map<String, Object> contextData = instance.getContextData();
        Map<String, Object> nodeConfig = node.getNodeConfig();
        
        // æ‰§è¡Œå…·ä½“çš„ä¸šåŠ¡é€»è¾‘
        String businessService = nodeConfig.getString("businessService");
        String businessMethod = nodeConfig.getString("businessMethod");
        
        // è°ƒç”¨ä¸šåŠ¡æœåŠ¡
        Object result = businessServiceInvoker.invoke(businessService, businessMethod, contextData);
        
        return ExecutionResult.success(result);
    }
    
    @Override
    public NodeType getSupportedNodeType() {
        return NodeType.PROCESS;
    }
    
    @Override
    public String getProcessorName() {
        return "ProcessNodeProcessor";
    }
}
```

### 3. æµç¨‹æ‰©å±•æœºåˆ¶

#### åŠ¨æ€æ·»åŠ èŠ‚ç‚¹
```java
@Service
public class WorkflowExtensionService {
    
    /**
     * æ·»åŠ æ–°èŠ‚ç‚¹åˆ°ç°æœ‰æµç¨‹
     */
    public WorkflowNodeDefinition addNodeToWorkflow(String workflowId, NodeDefinitionRequest request) {
        // 1. éªŒè¯æµç¨‹æ˜¯å¦å­˜åœ¨
        WorkflowDefinition workflow = workflowDefinitionRepository.findById(workflowId)
            .orElseThrow(() -> new WorkflowException("æµç¨‹ä¸å­˜åœ¨"));
        
        // 2. åˆ›å»ºæ–°èŠ‚ç‚¹
        WorkflowNodeDefinition newNode = new WorkflowNodeDefinition();
        newNode.setNodeId(UUID.randomUUID().toString());
        newNode.setNodeCode(request.getNodeCode());
        newNode.setNodeName(request.getNodeName());
        newNode.setWorkflowId(workflowId);
        newNode.setNodeType(request.getNodeType());
        newNode.setNodeConfig(request.getNodeConfig());
        newNode.setSortOrder(request.getSortOrder());
        newNode.setIsActive(true);
        
        nodeDefinitionRepository.save(newNode);
        
        // 3. å»ºç«‹èŠ‚ç‚¹è¿æ¥
        if (request.getFromNodeId() != null) {
            WorkflowNodeConnection connection = new WorkflowNodeConnection();
            connection.setConnectionId(UUID.randomUUID().toString());
            connection.setFromNodeId(request.getFromNodeId());
            connection.setToNodeId(newNode.getNodeId());
            connection.setWorkflowId(workflowId);
            connection.setConnectionType(ConnectionType.SEQUENCE);
            connection.setIsActive(true);
            
            connectionRepository.save(connection);
        }
        
        if (request.getToNodeId() != null) {
            WorkflowNodeConnection connection = new WorkflowNodeConnection();
            connection.setConnectionId(UUID.randomUUID().toString());
            connection.setFromNodeId(newNode.getNodeId());
            connection.setToNodeId(request.getToNodeId());
            connection.setWorkflowId(workflowId);
            connection.setConnectionType(ConnectionType.SEQUENCE);
            connection.setIsActive(true);
            
            connectionRepository.save(connection);
        }
        
        return newNode;
    }
    
    /**
     * æ·»åŠ åˆ†æ”¯æµç¨‹
     */
    public WorkflowDefinition addBranchWorkflow(String parentWorkflowId, WorkflowDefinitionRequest request) {
        // 1. åˆ›å»ºåˆ†æ”¯æµç¨‹
        WorkflowDefinition branchWorkflow = new WorkflowDefinition();
        branchWorkflow.setWorkflowId(UUID.randomUUID().toString());
        branchWorkflow.setWorkflowCode(request.getWorkflowCode());
        branchWorkflow.setWorkflowName(request.getWorkflowName());
        branchWorkflow.setWorkflowType(WorkflowType.BRANCH);
        branchWorkflow.setParentWorkflowId(parentWorkflowId);
        branchWorkflow.setWorkflowLevel(getWorkflowLevel(parentWorkflowId) + 1);
        branchWorkflow.setWorkflowConfig(request.getWorkflowConfig());
        branchWorkflow.setIsActive(true);
        
        workflowDefinitionRepository.save(branchWorkflow);
        
        // 2. åˆ›å»ºåˆ†æ”¯æµç¨‹çš„èŠ‚ç‚¹
        for (NodeDefinitionRequest nodeRequest : request.getNodes()) {
            addNodeToWorkflow(branchWorkflow.getWorkflowId(), nodeRequest);
        }
        
        return branchWorkflow;
    }
    
    /**
     * åŠ¨æ€ä¿®æ”¹èŠ‚ç‚¹è¿æ¥
     */
    public void modifyNodeConnection(String connectionId, ConnectionModificationRequest request) {
        WorkflowNodeConnection connection = connectionRepository.findById(connectionId)
            .orElseThrow(() -> new WorkflowException("è¿æ¥ä¸å­˜åœ¨"));
        
        // æ›´æ–°è¿æ¥é…ç½®
        if (request.getConditionExpression() != null) {
            connection.setConditionExpression(request.getConditionExpression());
        }
        
        if (request.getConnectionType() != null) {
            connection.setConnectionType(request.getConnectionType());
        }
        
        connectionRepository.save(connection);
    }
}
```

### 4. æµç¨‹å¯è§†åŒ–è®¾è®¡å™¨

#### å‰ç«¯æµç¨‹è®¾è®¡å™¨ç»„ä»¶
```vue
<template>
  <div class="workflow-designer">
    <div class="toolbar">
      <el-button @click="addNode('START')">æ·»åŠ å¼€å§‹èŠ‚ç‚¹</el-button>
      <el-button @click="addNode('PROCESS')">æ·»åŠ å¤„ç†èŠ‚ç‚¹</el-button>
      <el-button @click="addNode('DECISION')">æ·»åŠ å†³ç­–èŠ‚ç‚¹</el-button>
      <el-button @click="addNode('END')">æ·»åŠ ç»“æŸèŠ‚ç‚¹</el-button>
      <el-button @click="saveWorkflow">ä¿å­˜æµç¨‹</el-button>
    </div>
    
    <div class="canvas" ref="canvas">
      <div
        v-for="node in nodes"
        :key="node.nodeId"
        class="workflow-node"
        :class="node.nodeType.toLowerCase()"
        :style="{ left: node.positionX + 'px', top: node.positionY + 'px' }"
        @mousedown="startDrag(node, $event)"
        @click="selectNode(node)"
      >
        <div class="node-header">{{ node.nodeName }}</div>
        <div class="node-content">{{ node.nodeCode }}</div>
        <div class="node-handles">
          <div class="handle handle-top" @click="addConnection(node, 'top')"></div>
          <div class="handle handle-bottom" @click="addConnection(node, 'bottom')"></div>
          <div class="handle handle-left" @click="addConnection(node, 'left')"></div>
          <div class="handle handle-right" @click="addConnection(node, 'right')"></div>
        </div>
      </div>
      
      <svg class="connections">
        <path
          v-for="connection in connections"
          :key="connection.connectionId"
          :d="getConnectionPath(connection)"
          :class="connection.connectionType.toLowerCase()"
          @click="selectConnection(connection)"
        />
      </svg>
    </div>
    
    <div class="properties-panel" v-if="selectedNode">
      <h3>èŠ‚ç‚¹å±æ€§</h3>
      <el-form :model="selectedNode" label-width="100px">
        <el-form-item label="èŠ‚ç‚¹åç§°">
          <el-input v-model="selectedNode.nodeName" />
        </el-form-item>
        <el-form-item label="èŠ‚ç‚¹ä»£ç ">
          <el-input v-model="selectedNode.nodeCode" />
        </el-form-item>
        <el-form-item label="èŠ‚ç‚¹ç±»å‹">
          <el-select v-model="selectedNode.nodeType">
            <el-option label="å¼€å§‹èŠ‚ç‚¹" value="START" />
            <el-option label="å¤„ç†èŠ‚ç‚¹" value="PROCESS" />
            <el-option label="å†³ç­–èŠ‚ç‚¹" value="DECISION" />
            <el-option label="å¹¶è¡ŒèŠ‚ç‚¹" value="PARALLEL" />
            <el-option label="åˆå¹¶èŠ‚ç‚¹" value="MERGE" />
            <el-option label="ç»“æŸèŠ‚ç‚¹" value="END" />
          </el-select>
        </el-form-item>
        <el-form-item label="å¤„ç†å™¨ç±»">
          <el-input v-model="selectedNode.nodeConfig.processorClass" />
        </el-form-item>
        <el-form-item label="é…ç½®å‚æ•°">
          <el-input
            type="textarea"
            v-model="selectedNode.nodeConfigJson"
            :rows="4"
          />
        </el-form-item>
      </el-form>
    </div>
  </div>
</template>

<script>
export default {
  name: 'WorkflowDesigner',
  data() {
    return {
      nodes: [],
      connections: [],
      selectedNode: null,
      selectedConnection: null,
      dragging: false,
      dragOffset: { x: 0, y: 0 }
    }
  },
  methods: {
    addNode(nodeType) {
      const node = {
        nodeId: this.generateId(),
        nodeCode: `${nodeType}_${Date.now()}`,
        nodeName: this.getDefaultNodeName(nodeType),
        nodeType: nodeType,
        positionX: 100 + Math.random() * 200,
        positionY: 100 + Math.random() * 200,
        nodeConfig: {
          processorClass: this.getDefaultProcessorClass(nodeType)
        }
      }
      
      this.nodes.push(node)
      this.selectNode(node)
    },
    
    addConnection(fromNode, direction) {
      // è¿æ¥é€»è¾‘
      this.$message.info('ç‚¹å‡»ç›®æ ‡èŠ‚ç‚¹å®Œæˆè¿æ¥')
    },
    
    saveWorkflow() {
      const workflowData = {
        nodes: this.nodes,
        connections: this.connections
      }
      
      this.$http.post('/api/workflow/save', workflowData)
        .then(response => {
          this.$message.success('æµç¨‹ä¿å­˜æˆåŠŸ')
        })
        .catch(error => {
          this.$message.error('æµç¨‹ä¿å­˜å¤±è´¥')
        })
    },
    
    getConnectionPath(connection) {
      const fromNode = this.nodes.find(n => n.nodeId === connection.fromNodeId)
      const toNode = this.nodes.find(n => n.nodeId === connection.toNodeId)
      
      if (!fromNode || !toNode) return ''
      
      const startX = fromNode.positionX + 50
      const startY = fromNode.positionY + 25
      const endX = toNode.positionX + 50
      const endY = toNode.positionY + 25
      
      return `M ${startX} ${startY} L ${endX} ${endY}`
    }
  }
}
</script>
```

## ğŸ”§ æµç¨‹æ‰©å±•æœ€ä½³å®è·µ

### 1. èŠ‚ç‚¹è®¾è®¡åŸåˆ™

#### èŠ‚ç‚¹ç±»å‹è®¾è®¡
- **STARTèŠ‚ç‚¹**ï¼šæµç¨‹å…¥å£ï¼Œåªèƒ½æœ‰ä¸€ä¸ª
- **PROCESSèŠ‚ç‚¹**ï¼šä¸šåŠ¡å¤„ç†é€»è¾‘
- **DECISIONèŠ‚ç‚¹**ï¼šæ¡ä»¶åˆ¤æ–­åˆ†æ”¯
- **PARALLELèŠ‚ç‚¹**ï¼šå¹¶è¡Œæ‰§è¡Œåˆ†æ”¯
- **MERGEèŠ‚ç‚¹**ï¼šå¹¶è¡Œç»“æœåˆå¹¶
- **ENDèŠ‚ç‚¹**ï¼šæµç¨‹ç»“æŸï¼Œå¯ä»¥æœ‰å¤šä¸ª

#### èŠ‚ç‚¹é…ç½®è§„èŒƒ
```json
{
  "processorClass": "com.btc.mes.workflow.processor.ProductionProcessor",
  "businessService": "productionService",
  "businessMethod": "executeProduction",
  "timeout": 30000,
  "retryCount": 3,
  "conditionExpression": "productType == 'STANDARD'",
  "parallelConfig": {
    "maxConcurrent": 5,
    "waitForAll": true
  }
}
```

### 2. æµç¨‹ç‰ˆæœ¬ç®¡ç†

#### ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥
```java
@Service
public class WorkflowVersionService {
    
    /**
     * åˆ›å»ºæµç¨‹ç‰ˆæœ¬
     */
    public WorkflowVersion createVersion(String workflowId, String versionName) {
        // 1. è·å–å½“å‰æµç¨‹å®šä¹‰
        WorkflowDefinition currentWorkflow = workflowDefinitionRepository.findById(workflowId)
            .orElseThrow(() -> new WorkflowException("æµç¨‹ä¸å­˜åœ¨"));
        
        // 2. åˆ›å»ºæ–°ç‰ˆæœ¬
        WorkflowVersion newVersion = new WorkflowVersion();
        newVersion.setVersionId(UUID.randomUUID().toString());
        newVersion.setWorkflowId(workflowId);
        newVersion.setVersionName(versionName);
        newVersion.setVersionNumber(getNextVersionNumber(workflowId));
        newVersion.setIsActive(false);
        
        // 3. å¤åˆ¶æµç¨‹å®šä¹‰
        copyWorkflowDefinition(currentWorkflow, newVersion);
        
        return workflowVersionRepository.save(newVersion);
    }
    
    /**
     * å‘å¸ƒæµç¨‹ç‰ˆæœ¬
     */
    public void publishVersion(String versionId) {
        WorkflowVersion version = workflowVersionRepository.findById(versionId)
            .orElseThrow(() -> new WorkflowException("ç‰ˆæœ¬ä¸å­˜åœ¨"));
        
        // 1. åœç”¨å½“å‰ç‰ˆæœ¬
        deactivateCurrentVersion(version.getWorkflowId());
        
        // 2. æ¿€æ´»æ–°ç‰ˆæœ¬
        version.setIsActive(true);
        version.setPublishedAt(LocalDateTime.now());
        workflowVersionRepository.save(version);
        
        // 3. æ›´æ–°æµç¨‹å®šä¹‰
        updateWorkflowDefinition(version);
    }
}
```

### 3. æµç¨‹ç›‘æ§å’Œåˆ†æ

#### æµç¨‹æ€§èƒ½ç›‘æ§
```java
@Component
public class WorkflowMonitor {
    
    /**
     * ç›‘æ§æµç¨‹æ‰§è¡Œæ€§èƒ½
     */
    @EventListener
    public void handleNodeExecution(NodeExecutionEvent event) {
        // è®°å½•æ‰§è¡Œæ—¶é—´
        long executionTime = event.getEndTime() - event.getStartTime();
        
        // æ›´æ–°æ€§èƒ½ç»Ÿè®¡
        updatePerformanceStats(event.getNodeId(), executionTime);
        
        // æ£€æŸ¥æ€§èƒ½é˜ˆå€¼
        if (executionTime > getPerformanceThreshold(event.getNodeId())) {
            // å‘é€å‘Šè­¦
            sendPerformanceAlert(event.getNodeId(), executionTime);
        }
    }
    
    /**
     * ç”Ÿæˆæµç¨‹åˆ†ææŠ¥å‘Š
     */
    public WorkflowAnalysisReport generateAnalysisReport(String workflowId, LocalDateTime startTime, LocalDateTime endTime) {
        // 1. è·å–æ‰§è¡Œç»Ÿè®¡æ•°æ®
        List<WorkflowInstance> instances = instanceRepository
            .findByWorkflowIdAndStartTimeBetween(workflowId, startTime, endTime);
        
        // 2. è®¡ç®—å…³é”®æŒ‡æ ‡
        long totalInstances = instances.size();
        long completedInstances = instances.stream()
            .mapToLong(i -> i.getInstanceStatus() == WorkflowStatus.COMPLETED ? 1 : 0)
            .sum();
        long failedInstances = instances.stream()
            .mapToLong(i -> i.getInstanceStatus() == WorkflowStatus.FAILED ? 1 : 0)
            .sum();
        
        double successRate = (double) completedInstances / totalInstances * 100;
        double failureRate = (double) failedInstances / totalInstances * 100;
        
        // 3. è®¡ç®—å¹³å‡æ‰§è¡Œæ—¶é—´
        double avgExecutionTime = instances.stream()
            .filter(i -> i.getEndTime() != null)
            .mapToLong(i -> Duration.between(i.getStartTime(), i.getEndTime()).toMinutes())
            .average()
            .orElse(0.0);
        
        // 4. ç”ŸæˆæŠ¥å‘Š
        return WorkflowAnalysisReport.builder()
            .workflowId(workflowId)
            .startTime(startTime)
            .endTime(endTime)
            .totalInstances(totalInstances)
            .completedInstances(completedInstances)
            .failedInstances(failedInstances)
            .successRate(successRate)
            .failureRate(failureRate)
            .avgExecutionTime(avgExecutionTime)
            .build();
    }
}
```

## ğŸ“Š æ€»ç»“

### æ–¹æ¡ˆç‰¹ç‚¹

1. **å®Œå…¨åŠ¨æ€**ï¼šæ”¯æŒè¿è¡Œæ—¶æ·»åŠ èŠ‚ç‚¹ã€ä¿®æ”¹è¿æ¥ã€åˆ›å»ºåˆ†æ”¯
2. **é›¶åœæœºæ‰©å±•**ï¼šæ— éœ€é‡å¯ç³»ç»Ÿå³å¯æ‰©å±•æµç¨‹
3. **å¯è§†åŒ–è®¾è®¡**ï¼šæä¾›ç›´è§‚çš„æµç¨‹è®¾è®¡å™¨
4. **ç‰ˆæœ¬ç®¡ç†**ï¼šæ”¯æŒæµç¨‹ç‰ˆæœ¬æ§åˆ¶å’Œå›æ»š
5. **æ€§èƒ½ç›‘æ§**ï¼šå®Œæ•´çš„æµç¨‹æ‰§è¡Œç›‘æ§å’Œåˆ†æ
6. **MESé›†æˆ**ï¼šå®Œå…¨å…¼å®¹ç°æœ‰MESç³»ç»Ÿæ¶æ„

### é€‚ç”¨åœºæ™¯

- éœ€è¦é¢‘ç¹è°ƒæ•´ä¸šåŠ¡æµç¨‹çš„MESç³»ç»Ÿ
- å¤šå®¢æˆ·å®šåˆ¶åŒ–éœ€æ±‚è¾ƒå¤šçš„ç³»ç»Ÿ
- éœ€è¦å¯è§†åŒ–æµç¨‹è®¾è®¡çš„ç³»ç»Ÿ
- å¯¹æµç¨‹æ‰§è¡Œæ€§èƒ½æœ‰è¦æ±‚çš„ç³»ç»Ÿ

### å®æ–½å»ºè®®

1. **åˆ†é˜¶æ®µå®æ–½**ï¼šå…ˆå®ç°æ ¸å¿ƒåŠŸèƒ½ï¼Œå†é€æ­¥æ·»åŠ é«˜çº§ç‰¹æ€§
2. **æ€§èƒ½ä¼˜åŒ–**ï¼šåˆç†è®¾è®¡ç´¢å¼•ï¼Œä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
3. **ç›‘æ§å‘Šè­¦**ï¼šå»ºç«‹å®Œå–„çš„ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶
4. **ç”¨æˆ·åŸ¹è®­**ï¼šæä¾›æµç¨‹è®¾è®¡å™¨ä½¿ç”¨åŸ¹è®­
5. **æ–‡æ¡£å®Œå–„**ï¼šå»ºç«‹å®Œæ•´çš„æµç¨‹è®¾è®¡è§„èŒƒæ–‡æ¡£

é€šè¿‡è¿™ä¸ªåŠ¨æ€æµç¨‹æ‰©å±•è§£å†³æ–¹æ¡ˆï¼ŒMESç³»ç»Ÿå¯ä»¥çµæ´»åº”å¯¹å„ç§ä¸šåŠ¡å˜åŒ–ï¼Œå®ç°çœŸæ­£çš„"ä¹é«˜ç§¯æœ¨å¼"æµç¨‹ç®¡ç†ã€‚
